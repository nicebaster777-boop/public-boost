# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞—à–µ–≥–æ VPS

## ‚úÖ –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è —Å—Ç–∞—Ä—Ç–∞!

### –í–∞—à–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- ‚úÖ **2 —è–¥—Ä–∞ CPU** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º
- ‚úÖ **2 GB RAM** - –º–∏–Ω–∏–º—É–º, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è MVP
- ‚úÖ **35 GB —Ö—Ä–∞–Ω–∏–ª–∏—â–∞** - –æ—Ç–ª–∏—á–Ω–æ, —Å —Ö–æ—Ä–æ—à–∏–º –∑–∞–ø–∞—Å–æ–º
- ‚úÖ **–ü—É–±–ª–∏—á–Ω—ã–π IP** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (–æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## –û—Ü–µ–Ω–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
1. **2 —è–¥—Ä–∞** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. **35 GB** - —Ö–≤–∞—Ç–∏—Ç –Ω–∞ –ø–µ—Ä–≤—ã–π –≥–æ–¥ —Ä–∞–±–æ—Ç—ã —Å –∑–∞–ø–∞—Å–æ–º
3. **2 GB RAM** - –º–∏–Ω–∏–º—É–º, –Ω–æ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ö–≤–∞—Ç–∏—Ç

### ‚ö†Ô∏è –ß—Ç–æ —É—á–µ—Å—Ç—å:
1. **2 GB RAM** - –Ω–∞ –ø—Ä–µ–¥–µ–ª–µ, –Ω–æ –¥–ª—è MVP –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
2. –ù—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ PostgreSQL –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
3. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å swap (2 GB)

---

## –ü–ª–∞–Ω –¥–µ–ø–ª–æ—è –¥–ª—è –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

### 1. –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):

```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å swap (2 GB) - –ø–æ–º–æ–∂–µ—Ç –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ RAM
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å swap
free -h
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è PostgreSQL:

–í `docker-compose.prod.yml` –¥–ª—è –ë–î –¥–æ–±–∞–≤–∏—Ç—å:

```yaml
  db:
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    command: postgres -c shared_buffers=256MB -c effective_cache_size=512MB -c maintenance_work_mem=64MB -c work_mem=4MB
```

–≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ë–î –¥–æ ~512 MB.

### 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `docker-compose.prod.yml` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```yaml
services:
  backend:
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 512M
        reservations:
          cpus: '0.3'
          memory: 256M

  frontend:
    deploy:
      resources:
        limits:
          cpus: '0.3'
          memory: 256M

  db:
    deploy:
      resources:
        limits:
          cpus: '0.8'
          memory: 512M

  redis:
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 256M

  celery:
    deploy:
      resources:
        limits:
          cpus: '0.3'
          memory: 256M

  nginx:
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 128M
```

**–ò—Ç–æ–≥–æ:**
- CPU: 1.0 + 0.3 + 0.8 + 0.2 + 0.3 + 0.2 = 2.8 (–ª–∏–º–∏—Ç—ã, —Ä–µ–∞–ª—å–Ω–æ –º–µ–Ω—å—à–µ)
- RAM: 512 + 256 + 512 + 256 + 256 + 128 = ~1.9 GB (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 2 GB)

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:

### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å htop
sudo apt install htop -y

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
htop

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker stats

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h
```

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏:

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–µ—Ö–≤–∞—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:

**CPU:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ > 80%
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –¢–∞–π–º–∞—É—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**RAM:**
- OOM (Out of Memory) –æ—à–∏–±–∫–∏
- –ê–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ swap
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã

### –†–µ—à–µ–Ω–∏—è:

1. **–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ:**
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
   - –û—Ç–∫–ª—é—á–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
   - –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏ –∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

2. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ:**
   - –ê–ø–≥—Ä–µ–π–¥ RAM: 2 GB ‚Üí 4 GB (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1)
   - –ê–ø–≥—Ä–µ–π–¥ CPU: 2 ‚Üí 4 —è–¥—Ä–∞ (–µ—Å–ª–∏ –±—É–¥–µ—Ç –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)

---

## –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–∞ (35 GB):

- Docker –æ–±—Ä–∞–∑—ã: ~1 GB
- –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞: ~20 MB
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (1 –≥–æ–¥): ~1-2 GB
- –õ–æ–≥–∏ (1 –≥–æ–¥): ~1 GB
- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã: ~500 MB
- –°–∏—Å—Ç–µ–º–∞ –∏ —Ä–µ–∑–µ—Ä–≤: ~2-3 GB
- **–ò—Ç–æ–≥–æ: ~6-8 GB** (–æ—Å—Ç–∞–µ—Ç—Å—è ~27 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞)

**–í—ã–≤–æ–¥:** 35 GB –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ! ‚úÖ

---

## –ò—Ç–æ–≥–æ:

‚úÖ **–í–∞—à–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ MVP!**

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å swap (2 GB)
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
4. –ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ - –∞–ø–≥—Ä–µ–π–¥ RAM –¥–æ 4 GB

**–ì–æ—Ç–æ–≤—ã –∫ –¥–µ–ø–ª–æ—é!** üöÄ

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –µ—Å—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π IP
2. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ `DEPLOY_FROM_SCRATCH.md`
3. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å (—Å–º. `VPS_OPTIMIZATION.md`)
