# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è VPS —Å 1 —è–¥—Ä–æ–º –∏ 2 GB RAM

## –í–∞—à–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- ‚úÖ 30 GB —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–æ—Ç–ª–∏—á–Ω–æ, —Å –∑–∞–ø–∞—Å–æ–º)
- ‚ö†Ô∏è 1 —è–¥—Ä–æ 3.3 –ì–ì—Ü (–Ω–∏–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö 2 —è–¥–µ—Ä, –Ω–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ OK)
- ‚úÖ 2 GB RAM (–º–∏–Ω–∏–º—É–º, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
- ‚úÖ Ubuntu 22.04 (–æ—Ç–ª–∏—á–Ω–æ)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

### 1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `docker-compose.prod.yml` —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:

```yaml
services:
  backend:
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    deploy:
      resources:
        limits:
          cpus: '0.8'  # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ CPU (80% –æ—Ç 1 —è–¥—Ä–∞)
          memory: 512M  # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ RAM
        reservations:
          cpus: '0.3'
          memory: 256M

  frontend:
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    deploy:
      resources:
        limits:
          cpus: '0.3'
          memory: 256M
        reservations:
          cpus: '0.1'
          memory: 128M

  db:
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          cpus: '0.2'
          memory: 256M

  redis:
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 256M
        reservations:
          cpus: '0.1'
          memory: 128M

  celery:
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    deploy:
      resources:
        limits:
          cpus: '0.3'
          memory: 256M
        reservations:
          cpus: '0.1'
          memory: 128M

  nginx:
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 128M
        reservations:
          cpus: '0.1'
          memory: 64M
```

**–ò—Ç–æ–≥–æ:**
- CPU: 0.8 + 0.3 + 0.5 + 0.2 + 0.3 + 0.2 = 2.3 (–Ω–æ —ç—Ç–æ –ª–∏–º–∏—Ç—ã, —Ä–µ–∞–ª—å–Ω–æ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ)
- RAM: 512 + 256 + 512 + 256 + 256 + 128 = ~1.9 GB (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 2 GB)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL –¥–ª—è –º–∞–ª–æ–π –ø–∞–º—è—Ç–∏

–î–æ–±–∞–≤—å—Ç–µ –≤ `docker-compose.prod.yml` –¥–ª—è –ë–î:

```yaml
  db:
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    command: postgres -c shared_buffers=256MB -c effective_cache_size=512MB -c maintenance_work_mem=64MB -c work_mem=4MB
```

### 3. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ

–ï—Å–ª–∏ Celery –Ω–µ –Ω—É–∂–µ–Ω —Å—Ä–∞–∑—É (–¥–ª—è MVP –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å):

```bash
# –ó–∞–ø—É—Å–∫ –±–µ–∑ Celery (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
docker-compose -f docker-compose.prod.yml up -d backend frontend db redis nginx
```

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
sudo systemctl disable snapd  # –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
sudo systemctl disable unattended-upgrades  # –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å swap (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

### 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å htop –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
sudo apt install htop -y

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ Docker
docker stats

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞
df -h
du -sh /var/lib/docker/*
```

### 6. –û—á–∏—Å—Ç–∫–∞ Docker (—Ä–µ–≥—É–ª—è—Ä–Ω–æ)

```bash
# –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
docker system prune -a

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs --tail=100 > /dev/null
```

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤:

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–µ—Ö–≤–∞—Ç–∫–∏ CPU:
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å: `htop`)
- –¢–∞–π–º–∞—É—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:** –ê–ø–≥—Ä–µ–π–¥ –¥–æ 2 —è–¥–µ—Ä –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–µ—Ö–≤–∞—Ç–∫–∏ RAM:
- OOM (Out of Memory) –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã
- Swap –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:** 
- –£–≤–µ–ª–∏—á–∏—Ç—å swap (–≤—Ä–µ–º–µ–Ω–Ω–æ)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
- –ê–ø–≥—Ä–µ–π–¥ –¥–æ 4 GB RAM

---

## –î–ª—è —Å—Ç–∞—Ä—Ç–∞ MVP:

‚úÖ **–í–∞—à VPS –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞!**

1. –ù–∞—á–Ω–∏—Ç–µ —Å –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
3. –ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ - –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏–ª–∏ –∞–ø–≥—Ä–µ–π–¥—å—Ç–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∞–ø–≥—Ä–µ–π–¥–∞:**
1. CPU: 1 ‚Üí 2 —è–¥—Ä–∞ (–µ—Å–ª–∏ –±—É–¥–µ—Ç –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)
2. RAM: 2 ‚Üí 4 GB (–µ—Å–ª–∏ –±—É–¥–µ—Ç –º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

---

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ RAM
htop

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker stats

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h
du -sh /opt/public-boost/*

# –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
dmesg | tail -20
```

---

**–í—ã–≤–æ–¥:** –í–∞—à VPS –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ MVP! –ù–∞—á–Ω–∏—Ç–µ —Å –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã. üöÄ
